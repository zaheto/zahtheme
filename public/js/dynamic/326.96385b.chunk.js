"use strict";(self.webpackChunk_roots_bud_sage_sage=self.webpackChunk_roots_bud_sage_sage||[]).push([[326],{"./scripts/atlas-calculator.js":(a,e,i)=>{i.r(e),jQuery(document).ready((function(a){a("#atlas-calculator-results").hide(),a(".required-materials--toggle-link").on("click",(function(e){e.preventDefault();const i=a(this).closest(".mt-8").find('[id$="calculator-results"]'),r=a(this).find(".toggle-icon");i.slideToggle(300,(function(){r.text(a(this).is(":visible")?"-":"+")}))}));const e=a(".price"),i=a("button.single_add_to_cart_button"),r=a("#atlas-panel-width"),l=a("#atlas-panel-height"),t=a("#atlas-number-of-panels"),s=a(".main-product-sizes__item.selected");if(s.length){const a=s.data("l"),e=s.data("h"),i=s.data("panels")||1;r.val(a),l.val(e).trigger("change"),t.val(i)}function p(){const a=parseFloat(r.val()),e=parseFloat(l.val()),i=parseInt(t.val());return!isNaN(a)&&!isNaN(e)&&!isNaN(i)&&a>=parseFloat(r.attr("min"))&&a<=parseFloat(r.attr("max"))&&i>0}function n(){if(!p())return;let s=parseFloat(r.val()),n=parseFloat(l.val()),c=parseInt(t.val());try{const r=s.toFixed(2),l=(Math.floor(1e3*n)/1e3).toFixed(3);let t=Math.max((n-.045)/.1*c,0),p=Math.max((s-.01)*t,0),o=c,_=n*c,g=c,u=n*c,d=c,f=s*c,h=0;s>1.29&&s<2.1?h=1:s>2.09&&(h=2);let F=h,m=n*h*c,$=0;if(c>0){let a=0;0==h?a=4*(t/c+1)*c:1==h?a=5*(t/c+1)*c:2==h&&(a=6*(t/c+1)*c),$=100*Math.ceil((a+2*h)/c/100)*c}let v=10*c,P=10*c+h*c,b=h*c,w=parseFloat(atlas_pricing.base_price)*p;w+=_*parseFloat(atlas_pricing.price_u_profile_left||0),w+=u*parseFloat(atlas_pricing.price_u_profile_right||0),w+=f*parseFloat(atlas_pricing.price_u_horizontal_panel||0),w+=m*parseFloat(atlas_pricing.price_reinforcing_profile||0),w+=$*parseFloat(atlas_pricing.price_rivets||0),w+=v*parseFloat(atlas_pricing.price_self_tapping_screw||0),w+=P*parseFloat(atlas_pricing.price_dowels||0),w+=b*parseFloat(atlas_pricing.price_corners||0),e.html(`<span class="woocommerce-Price-amount amount"> \n                <bdi>\u041a\u0440\u0430\u0439\u043d\u0430 \u0446\u0435\u043d\u0430: ${w.toFixed(2)}&nbsp;<span class="woocommerce-Price-currencySymbol">\u043b\u0432.</span></bdi>\n            </span>`),a("#calculated_price").val(w.toFixed(2)),a("#atlas_panel_width").val(r),a("#atlas_panel_height").val(l),a("#atlas_number_of_panels").val(c),i.attr("data-calculated-price",w.toFixed(2)),i.attr("data-panel-width",r),i.attr("data-panel-height",l),i.attr("data-panels",c),console.log("Price Calculator Debug:",{inputs:{width:s,height:n,panels:c,formattedWidth:r,formattedHeight:l},materialCalculations:{blindsProfile:{pieces:t,formula:`(${n} - 0.045) / 0.1 * ${c}`,linearMeters:p,formula_lm:`(${s} - 0.01) * ${t}`,price:parseFloat(atlas_pricing.base_price)*p},uProfileLeft:{pieces:o,linearMeters:_,formula:`${n} * ${c}`,price:_*parseFloat(atlas_pricing.price_u_profile_left||0)},uProfileRight:{pieces:g,linearMeters:u,formula:`${n} * ${c}`,price:u*parseFloat(atlas_pricing.price_u_profile_right||0)},horizontalUProfile:{pieces:d,linearMeters:f,formula:`${s} * ${c}`,price:f*parseFloat(atlas_pricing.price_u_horizontal_panel||0)},reinforcingProfile:{pieces:F,F20_condition:`Width ${s} -> F20 = ${h}`,linearMeters:m,formula:`${n} * ${h} * ${c}`,price:m*parseFloat(atlas_pricing.price_reinforcing_profile||0)},rivets:{pieces:$,formula:`F20=${h} -> ${(t/c+1)*(0==h?4:1==h?5:6)*c} + (${h} * 2)`,price:$*parseFloat(atlas_pricing.price_rivets||0)},selfTappingScrews:{pieces:v,formula:`${c} * 10`,price:v*parseFloat(atlas_pricing.price_self_tapping_screw||0)},dowels:{pieces:P,formula:`${c} * 10 + ${h} * ${c}`,price:P*parseFloat(atlas_pricing.price_dowels||0)},corners:{pieces:b,formula:`${h} * ${c}`,price:b*parseFloat(atlas_pricing.price_corners||0)}},pricing:{basePrice:atlas_pricing.base_price,uProfileLeftPrice:atlas_pricing.price_u_profile_left,uProfileRightPrice:atlas_pricing.price_u_profile_right,horizontalUProfilePrice:atlas_pricing.price_u_horizontal_panel,reinforcingProfilePrice:atlas_pricing.price_reinforcing_profile,rivetsPrice:atlas_pricing.price_rivets,selfTappingScrewPrice:atlas_pricing.price_self_tapping_screw,dowelsPrice:atlas_pricing.price_dowels,cornersPrice:atlas_pricing.price_corners},totalPrice:{final:w.toFixed(2),breakdown:{blindsProfile:parseFloat(atlas_pricing.base_price)*p,uProfileLeft:_*parseFloat(atlas_pricing.price_u_profile_left||0),uProfileRight:u*parseFloat(atlas_pricing.price_u_profile_right||0),horizontalUProfile:f*parseFloat(atlas_pricing.price_u_horizontal_panel||0),reinforcingProfile:m*parseFloat(atlas_pricing.price_reinforcing_profile||0),rivets:$*parseFloat(atlas_pricing.price_rivets||0),selfTappingScrews:v*parseFloat(atlas_pricing.price_self_tapping_screw||0),dowels:P*parseFloat(atlas_pricing.price_dowels||0),corners:b*parseFloat(atlas_pricing.price_corners||0)}},hiddenFields:{calculated_price:a("#calculated_price").val(),atlas_panel_width:a("#atlas_panel_width").val(),atlas_panel_height:a("#atlas_panel_height").val(),atlas_number_of_panels:a("#atlas_number_of_panels").val()}});const x=a("#atlas-calculator-results");x.hasClass("hidden")||x.show(),i.attr("data-calculated-price",w.toFixed(2)),a("#calculated_price").val(w.toFixed(2)),a("#atlas-results").html(`\n                <ul>\n                    <li>\u041f\u0440\u043e\u0444\u0438\u043b \u0416\u0430\u043b\u044e\u0437\u0438: <span>${t.toFixed(2)} \u0431\u0440. / ${p.toFixed(2)} \u043b\u043c</span></li>\n                    <li>\u041f\u0440\u043e\u0444\u0438\u043b U \u043e\u0442\u043b\u044f\u0432\u043e: <span>${o} \u0431\u0440. / ${_.toFixed(3)} \u043b\u043c</span></li>\n                    <li>\u041f\u0440\u043e\u0444\u0438\u043b U \u043e\u0442\u0434\u044f\u0441\u043d\u043e: <span>${g} \u0431\u0440. / ${u.toFixed(3)} \u043b\u043c</span></li>\n                    <li>\u0425\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0435\u043d \u043f\u0440\u043e\u0444\u0438\u043b U: <span>${d} \u0431\u0440. / ${f.toFixed(2)} \u043b\u043c</span></li>\n                    <li>\u0423\u043a\u0440\u0435\u043f\u0432\u0430\u0449 \u043f\u0440\u043e\u0444\u0438\u043b: <span>${F} \u0431\u0440. / ${m.toFixed(3)} \u043b\u043c</span></li>\n                    <li>\u0417\u0430\u043a\u043b\u0435\u043f\u043a\u0438: <span>${$} \u0431\u0440.</span></li>\n                    <li>\u0421\u0430\u043c\u043e\u043d\u0430\u0440\u0435\u0437\u043d\u0438 \u0432\u0438\u043d\u0442\u043e\u0432\u0435: <span>${v} \u0431\u0440.</span></li>\n                    <li>\u0422\u0430\u043f\u0438: <span>${P} \u0431\u0440.</span></li>\n                    <li>\u042a\u0433\u044a\u043b: <span>${b} \u0431\u0440.</span></li>\n                </ul>\n            `),a("#atlas-final-price").html(`<p>\u041a\u0440\u0430\u0439\u043d\u0430 \u0446\u0435\u043d\u0430: ${w.toFixed(2)} \u043b\u0432.</p>`)}catch(o){console.error("An error occurred during calculations: ",o)}}r.on("input",n),l.on("change",n),t.on("input",n),a("input, select").on("input change",(function(){p()?i.prop("disabled",!1):i.prop("disabled",!0)})),a(".main-product-sizes__item").on("click",(function(e){e.preventDefault(),a(".main-product-sizes__item").removeClass("selected"),a(this).addClass("selected");const i=a(this).data("l"),s=a(this).data("h"),p=a(this).data("panels")||1;r.val(i),l.val(s).trigger("change"),t.val(p),n()})),n()}))}}]);