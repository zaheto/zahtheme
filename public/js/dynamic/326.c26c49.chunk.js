"use strict";(self.webpackChunk_roots_bud_sage_sage=self.webpackChunk_roots_bud_sage_sage||[]).push([[326],{"./scripts/atlas-calculator.js":(a,e,t)=>{t.r(e),jQuery(document).ready((function(a){a("#atlas-calculator-results").hide(),a(".required-materials--toggle-link").on("click",(function(e){e.preventDefault();const t=a("#atlas-calculator-results"),i=a(this).find(".toggle-icon");t.is(":visible")?t.slideUp(300,(function(){t.addClass("hidden").css("display",""),i.text("+")})):t.removeClass("hidden").slideDown(300,(function(){i.text("-")}))}));const e=a(".inside-product--top-wrap .price"),t=a("button.single_add_to_cart_button"),i=a("#atlas-panel-width"),s=a("#atlas-panel-height"),l=a("#atlas-number-of-panels"),n=a(".main-product-sizes__item.selected");if(n.length){const a=n.data("l"),e=n.data("h"),t=n.data("panels")||1;i.val(a),s.val(e).trigger("change"),l.val(t)}function r(){const a=parseFloat(i.val()),e=parseFloat(s.val()),t=parseInt(l.val());return!isNaN(a)&&!isNaN(e)&&!isNaN(t)&&a>=parseFloat(i.attr("min"))&&a<=parseFloat(i.attr("max"))&&t>0}function c(){if(!r())return;let n=parseFloat(i.val()),c=parseFloat(s.val()),p=parseInt(l.val());try{console.log("atlas_pricing:",atlas_pricing),console.log("Sale Price:",atlas_pricing.sale_price),console.log("Base Price:",atlas_pricing.base_price);const i=n.toFixed(2),s=(Math.floor(1e3*c)/1e3).toFixed(3);let l=Math.max((c-.045)/.1*p,0),r=Math.max((n-.01)*l,0),o=p,_=c*p,d=p,u=c*p,g=p,h=n*p,m=0;n>1.29&&n<2.1?m=1:n>2.09&&(m=2);let F=m,f=c*m*p,b=0;if(p>0){let a=0;0==m?a=4*(l/p+1)*p:1==m?a=5*(l/p+1)*p:2==m&&(a=6*(l/p+1)*p),b=100*Math.ceil((a+2*m)/p/100)*p}let v=10*p,x=10*p+m*p,$=m*p,w=parseFloat(atlas_pricing.base_price)*r;w+=_*parseFloat(atlas_pricing.price_u_profile_left||0),w+=u*parseFloat(atlas_pricing.price_u_profile_right||0),w+=h*parseFloat(atlas_pricing.price_u_horizontal_panel||0),w+=f*parseFloat(atlas_pricing.price_reinforcing_profile||0),w+=b*parseFloat(atlas_pricing.price_rivets||0),w+=v*parseFloat(atlas_pricing.price_self_tapping_screw||0),w+=x*parseFloat(atlas_pricing.price_dowels||0),w+=$*parseFloat(atlas_pricing.price_corners||0);let y=w;atlas_pricing.sale_price&&atlas_pricing.sale_price>0&&atlas_pricing.sale_price<atlas_pricing.base_price&&(y=parseFloat(atlas_pricing.sale_price)*r,y+=_*parseFloat(atlas_pricing.price_u_profile_left||0),y+=u*parseFloat(atlas_pricing.price_u_profile_right||0),y+=h*parseFloat(atlas_pricing.price_u_horizontal_panel||0),y+=f*parseFloat(atlas_pricing.price_reinforcing_profile||0),y+=b*parseFloat(atlas_pricing.price_rivets||0),y+=v*parseFloat(atlas_pricing.price_self_tapping_screw||0),y+=x*parseFloat(atlas_pricing.price_dowels||0),y+=$*parseFloat(atlas_pricing.price_corners||0)),console.log("Total Price:",w),console.log("Discounted Price:",y);let P=0;w>0&&y>0&&(P=Math.round(100-y/w*100),console.log("Discount Percentage:",P+"%")),a(".product-badge.sale").text(`-${P}%`),a("#total_price").val(w.toFixed(2)),a("#discounted_price").val(y.toFixed(2)),atlas_pricing.sale_price&&atlas_pricing.sale_price>0&&atlas_pricing.sale_price<atlas_pricing.base_price?e.html(`\n                    <span class="woocommerce-Price-amount amount">\n                        <del>\n                            <bdi>${w.toFixed(2)}&nbsp;<span class="woocommerce-Price-currencySymbol">\u043b\u0432.</span></bdi>\n                        </del>\n                        <ins>\n                            <bdi>${y.toFixed(2)}&nbsp;<span class="woocommerce-Price-currencySymbol">\u043b\u0432.</span></bdi>\n                        </ins>\n                        <span class="custom-text-after-price">(\u0432\u043a\u043b. \u0414\u0414\u0421)</span>\n                    </span>\n                `):e.html(`\n                    <span class="woocommerce-Price-amount amount">\n                        <bdi>${w.toFixed(2)}&nbsp;<span class="woocommerce-Price-currencySymbol">\u043b\u0432.</span></bdi>\n                        <span class="custom-text-after-price">(\u0432\u043a\u043b. \u0414\u0414\u0421)</span>\n                    </span>\n                `),a("#calculated_price").val(y.toFixed(2)),a("#atlas_panel_width").val(i),a("#atlas_panel_height").val(s),a("#atlas_number_of_panels").val(p),t.attr("data-calculated-price",y.toFixed(2)),t.attr("data-panel-width",i),t.attr("data-panel-height",s),t.attr("data-panels",p),a("#atlas-results").html(`\n                <ul>\n                    <li>\u041f\u0440\u043e\u0444\u0438\u043b \u0416\u0430\u043b\u044e\u0437\u0438: <span>${l.toFixed(2)} \u0431\u0440. / ${r.toFixed(2)} \u043b\u043c</span></li>\n                    <li>\u041f\u0440\u043e\u0444\u0438\u043b U \u043e\u0442\u043b\u044f\u0432\u043e: <span>${o} \u0431\u0440. / ${_.toFixed(3)} \u043b\u043c</span></li>\n                    <li>\u041f\u0440\u043e\u0444\u0438\u043b U \u043e\u0442\u0434\u044f\u0441\u043d\u043e: <span>${d} \u0431\u0440. / ${u.toFixed(3)} \u043b\u043c</span></li>\n                    <li>\u0425\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0435\u043d \u043f\u0440\u043e\u0444\u0438\u043b U: <span>${g} \u0431\u0440. / ${h.toFixed(2)} \u043b\u043c</span></li>\n                    <li>\u0423\u043a\u0440\u0435\u043f\u0432\u0430\u0449 \u043f\u0440\u043e\u0444\u0438\u043b: <span>${F} \u0431\u0440. / ${f.toFixed(3)} \u043b\u043c</span></li>\n                    <li>\u0417\u0430\u043a\u043b\u0435\u043f\u043a\u0438: <span>${b} \u0431\u0440.</span></li>\n                    <li>\u0421\u0430\u043c\u043e\u043d\u0430\u0440\u0435\u0437\u043d\u0438 \u0432\u0438\u043d\u0442\u043e\u0432\u0435: <span>${v} \u0431\u0440.</span></li>\n                    <li>\u0422\u0430\u043f\u0438: <span>${x} \u0431\u0440.</span></li>\n                    <li>\u042a\u0433\u044a\u043b: <span>${$} \u0431\u0440.</span></li>\n                </ul>\n            `),a("#atlas-final-price").html(`<p>\u041a\u0440\u0430\u0439\u043d\u0430 \u0446\u0435\u043d\u0430: ${y.toFixed(2)} \u043b\u0432.</p>`)}catch(o){console.error("An error occurred during calculations: ",o)}}i.on("input",c),s.on("change",c),l.on("input",c),a("input, select").on("input change",(function(){r()?t.prop("disabled",!1):t.prop("disabled",!0)})),a(".main-product-sizes__item").on("click",(function(e){e.preventDefault(),a(".main-product-sizes__item").removeClass("selected"),a(this).addClass("selected");const t=a(this).data("l"),n=a(this).data("h"),r=a(this).data("panels")||1;i.val(t),s.val(n).trigger("change"),l.val(r),c(),a(".product-badge.sale").each((function(){a(this).data("total-price"),a(this).data("discounted-price");const e=a(this).data("discount-percentage");e>0&&(a(this).html(`-${e}%`),console.log(`Discount Badge Updated: -${e}%`))}))})),c()}))}}]);